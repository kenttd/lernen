import{D as j,E as O,G as L,r as w,u as U,H as q,I as G,J as D,p as x,q as b,e as F,L as $}from"./app-8e9cf622.js";function T(t){return q()?(G(t),!0):!1}function g(t){return typeof t=="function"?t():U(t)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const B=Object.prototype.toString,H=t=>B.call(t)==="[object Object]",R=()=>{},X=J();function J(){var t,e;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function N(t){let e;function a(){return e||(e=t()),e}return a.reset=async()=>{const i=e;e=void 0,i&&await i},a}function _(...t){if(t.length!==1)return j(...t);const e=t[0];return typeof e=="function"?O(L(()=>({get:e,set:R}))):w(e)}function V(t,e,a={}){const{immediate:i=!0}=a,l=w(!1);let s=null;function u(){s&&(clearTimeout(s),s=null)}function f(){l.value=!1,u()}function o(...r){u(),l.value=!0,s=setTimeout(()=>{l.value=!1,s=null,t(...r)},g(e))}return i&&(l.value=!0,A&&o()),T(f),{isPending:O(l),start:o,stop:f}}function z(t){var e;const a=g(t);return(e=a==null?void 0:a.$el)!=null?e:a}const k=A?window:void 0,I=A?window.navigator:void 0;function W(...t){let e,a,i,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([a,i,l]=t,e=k):[e,a,i,l]=t,!e)return R;Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]);const s=[],u=()=>{s.forEach(c=>c()),s.length=0},f=(c,d,v,m)=>(c.addEventListener(d,v,m),()=>c.removeEventListener(d,v,m)),o=b(()=>[z(e),g(l)],([c,d])=>{if(u(),!c)return;const v=H(d)?{...d}:d;s.push(...a.flatMap(m=>i.map(h=>f(c,m,h,v))))},{immediate:!0,flush:"post"}),r=()=>{o(),u()};return T(r),r}function K(){const t=w(!1),e=$();return e&&F(()=>{t.value=!0},e),t}function E(t){const e=K();return x(()=>(e.value,!!t()))}function M(t,e={}){const{controls:a=!1,navigator:i=I}=e,l=E(()=>i&&"permissions"in i);let s;const u=typeof t=="string"?{name:t}:t,f=w(),o=()=>{s&&(f.value=s.state)},r=N(async()=>{if(l.value){if(!s)try{s=await i.permissions.query(u),W(s,"change",o),o()}catch{f.value="prompt"}return s}});return r(),a?{state:f,isSupported:l,query:r}:f}function Y(t={}){const{navigator:e=I,read:a=!1,source:i,copiedDuring:l=1500,legacy:s=!1}=t,u=E(()=>e&&"clipboard"in e),f=M("clipboard-read"),o=M("clipboard-write"),r=x(()=>u.value||s),c=w(""),d=w(!1),v=V(()=>d.value=!1,l);function m(){u.value&&S(f.value)?e.clipboard.readText().then(n=>{c.value=n}):c.value=C()}r.value&&a&&W(["copy","cut"],m);async function h(n=g(i)){r.value&&n!=null&&(u.value&&S(o.value)?await e.clipboard.writeText(n):y(n),c.value=n,d.value=!0,v.start())}function y(n){const p=document.createElement("textarea");p.value=n??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function C(){var n,p,P;return(P=(p=(n=document==null?void 0:document.getSelection)==null?void 0:n.call(document))==null?void 0:p.toString())!=null?P:""}function S(n){return n==="granted"||n==="prompt"}return{isSupported:r,text:c,copied:d,copy:h}}function Z(t,e={}){const{pitch:a=1,rate:i=1,volume:l=1,window:s=k}=e,u=s&&s.speechSynthesis,f=E(()=>u),o=w(!1),r=w("init"),c=_(t||""),d=_(e.lang||"en-US"),v=D(void 0),m=(n=!o.value)=>{o.value=n},h=n=>{n.lang=g(d),n.voice=g(e.voice)||null,n.pitch=g(a),n.rate=g(i),n.volume=l,n.onstart=()=>{o.value=!0,r.value="play"},n.onpause=()=>{o.value=!1,r.value="pause"},n.onresume=()=>{o.value=!0,r.value="play"},n.onend=()=>{o.value=!1,r.value="end"},n.onerror=p=>{v.value=p}},y=x(()=>{o.value=!1,r.value="init";const n=new SpeechSynthesisUtterance(c.value);return h(n),n}),C=()=>{u.cancel(),y&&u.speak(y.value)},S=()=>{u.cancel(),o.value=!1};return f.value&&(h(y.value),b(d,n=>{y.value&&!o.value&&(y.value.lang=n)}),e.voice&&b(e.voice,()=>{u.cancel()}),b(o,()=>{o.value?u.resume():u.pause()})),T(()=>{o.value=!1}),{isSupported:f,isPlaying:o,status:r,utterance:y,error:v,stop:S,toggle:m,speak:C}}export{Y as a,_ as b,H as c,T as d,A as e,X as i,R as n,g as t,Z as u};
